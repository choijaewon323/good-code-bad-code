## 5.3 코드 줄 수를 고정하지 말라

### 5.3.1 간결하지만 이해하기 어려운 코드는 피하라

```java
	boolean isIdValid(short id) {
		return countSetBits(id & 0x7FFF) % 2 == ((id & 0x8000) >> 15);
	}
```

- 패리티 비트 검사하는 로직임
    - id의 하위 15비트에 값이 포함됨
    - id의 최상위 비트는 패리티 빝으
    - 15비트 값이 짝수인 경우 패리티 비트는 0
    - 홀수면 1
    - 0x7FF는 하위 15비트를 위한 비트 마스크
    - 0x8000은 최상위 비트에 대한 비트 마스크
- 단 한줄이지만 매우 복잡함

### 5.3.2 해결책: 더 많은 줄이 필요하더라도 가독성 높은 코드를 작성하라

```java
	boolean isIdValid(short id) {
		return extractEncodedParity(id) == calculateParity(getIdValue(id));
	}
	
	private static final short PARITY_BIT_INDEX = 15;
	private static final short PARITY_BIT_MASK = (short) (1 << PARITY_BIT_INDEX);
	private static final short VALUE_BIT_MASK = ~PARITY_BIT_MASK;
	
	private short getIdValue(short id) {
		return (short) (id & VALUE_BIT_MASK);
	}
	
	private short extractEncodedParity(short id) {
		return (short) ((id & PARITY_BIT_MASK) >> PARITY_BIT_INDEX);
	}
	
	private short calculateParity(short value) {
		return countSetBits(value) % 2;
	}
```

- 조금 더 이해가 쉬워짐