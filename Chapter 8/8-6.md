# 8.6 반환 유형에 구현 세부 정보가 유출되지 않도록 주의하라

## 8.6.1 반환 형식에 구현 세부 사항이 유출될 경우 문제가 될 수 있다

- ProfilePictureService는 서버에서 프로필 사진 데이터를 가져오는 HttpFetcher를 사용
- 이는 구현 세부사항이므로, 위 클래스를 사용하는 개발자는 HttpFetcher가 사용된다는 사실을 알 필요 없음

```java

class ProfilePictureService {
	private final HttpFetcher httpFetcher;
	
	ProfilePictureResult getProfilePicture(long userId) {}
}

class ProfilePictureResult {
	HttpResponse.Status getStatus() {}
	HttpResponse.Payload getImageData() {}
}
```

- 하지만 위 코드는 구현 세부사항을 누설한다
- 만약 Http가 아닌 웹소켓으로 변경된다면?

## 8.6.2 해결책: 추상화 계층에 적합한 유형을 반환하라

```java
class ProfilePictureService {
	private final HttpFetcher httpFetcher;

	ProfilePictureResult getProfilePicture(long userId) {}
}

class ProfilePictureResult {
	Status getStatus() {}
	List<Byte> getImageData() {}
	
	enum Status {
		SUCCESS,
		USER_DOES_NOT_EXIST,
		OTHER_ERROR
	}
}
```

- 열거형이 아닌 다형성으로 사용할수도 있다
- 핵심은 추상화 계층에 적합한 형식을 사용해야한다는 것